<%inherit file="/main.html" />
<%block name="bodyclass">${course.css_class}</%block>
<%include file="/courseware/course_navigation.html" args="active_page='search'" />
<%namespace name='static' file='/static_content.html'/>
<%block name="headextra">
    <%static:css group='course'/>
    <script type="text/javascript">
        var old_query = "${ old_query }";
    </script>
    <%namespace name='static' file='/static_content.html'/>
    <link href="${static.url('css/vendor/paginate.css')}" rel="stylesheet" type="text/css"></link>
    <script type="text/javascript" src="${static.url('js/vendor/jquery.paginate.js')}"></script>
    <script type="text/javascript" src="${static.url('js/search.js')}"></script>
    <link href="${static.url('css/search.css')}" rel="stylesheet" type="text/css"></link>
</%block>

<div class="container">
    <div class="search-results">
        <div id="menu-container">
            <ul class="menu">
            <li id="all" class="header-bar">
                <span class="filter-item"></span>
                Courseware
                <span class="count">${ len(data.entries) }</span>
                </span>
            </li>
            <li id="video" class="body-bar">
                <span class="filter-item">
                <span class="video-image"></span>
                Transcripts
                <span class="count">${ len(data.get_category("video"))}</span>
                </span>
            </li>
            <li id="problem" class="body-bar">
                <span class="filter-item">
                <span class="problem-image"></span>
                Problems
                <span class="count">${ len(data.get_category("problem"))}</span>
                </span>
            </li>
            </ul>
        </div>
        % if len(data.entries) > 0:
            <div class="search-container">
                <p class="search-context">
                    Showing ${len(data.entries)} results in courseware for ${course_id}
                </p>
                <p class="pagination-stub" style="text-align:center;"></p>
            % for datum in data.get_category(filter)[result_start:result_end]:
            <section>
                <a href=${datum.url}>
                    <div class="result-container">
                        <div class="result-header">
                        <span class="${datum.category}-image"/>
                            <h1 class="result-title">${datum.data['display_name']}</h1>
                        </div>
                        <div class="result-body">
                                <div class="thumbnail-wrapper">
                                    <div class="result-thumbnail">
                                    % if datum.thumbnail:
                                        % if datum.category == "problem":
                                            <img class="thumbnail" src='${static.url(datum.thumbnail)}' alt="${datum.data['display_name']}">
                                        % else: 
                                           <img class="thumbnail" src="${datum.thumbnail}" alt="${datum.data['display_name']}">
                                        % endif
                                    % else:
                                        <img class="thumbnail">
                                    % endif
                                    </div>
                                </div>
                            <div class="result-snippets">
                                <div class="snippet">
                                    ${datum.snippets}
                                </div>
                            </div>
                        </div>
                    </div>
                </a>
            </section>
            % endfor
        </div>
        % else:
            <h1 class="result-title no-results">No results found, please try again</h1>
        % endif
    </div>
</div>
